{"ast":null,"code":"import _slicedToArray from\"/Users/soone/Desktop/hell-met/front-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useRef,useState,useEffect}from'react';import'./WebcamCapture.css';import Webcam from\"react-webcam\";import{Link}from'react-router-dom';import imglogo from'./helmet_example1.png';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var WebcamComponent=function WebcamComponent(){return/*#__PURE__*/_jsx(Webcam,{});};var videoConstraints={width:500,height:500,facingMode:\"user\"};var WebcamCapture=function WebcamCapture(){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),image=_useState2[0],setImage=_useState2[1];var webcamRef=React.useRef(null);var capture=React.useCallback(function(){var imageSrc=webcamRef.current.getScreenshot();setImage(imageSrc);});var dataURItoBlob=function dataURItoBlob(dataURI){var byteString=atob(dataURI.split(\",\")[1]);var mimeString=dataURI.split(\",\")[0].split(\":\")[1].split(\";\")[0];var ab=new ArrayBuffer(byteString.length);var ia=new Uint8Array(ab);for(var i=0;i<byteString.length;i++){ia[i]=byteString.charCodeAt(i);}return new Blob([ab],{type:mimeString});};var handleUpload=function handleUpload(){var data=new FormData();var file=dataURItoBlob(image);data.append(\"file\",file,\"face.png\");fetch('http://localhost:8000/api/upload',{method:'POST',body:data});};return/*#__PURE__*/_jsxs(\"div\",{className:\"webcam-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"box-left\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"webcam-img-left\",children:image==''?/*#__PURE__*/_jsx(Webcam,{audio:false,height:500,ref:webcamRef,screenshotFormat:\"image/jpeg\",width:500,videoConstraints:videoConstraints}):/*#__PURE__*/_jsx(\"img\",{src:image})}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"div\",{children:image!=''?/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(e){e.preventDefault();setImage('');},className:\"webcam-btn\",children:\"Again \"}):/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(e){e.preventDefault();capture();},className:\"webcam-btn\",children:\"Capture\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"box-right\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"webcam-img-right\",children:image==''?/*#__PURE__*/_jsx(\"img\",{src:imglogo,height:500,width:500}):/*#__PURE__*/_jsx(\"img\",{src:image})}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(Link,{className:\"check-btn\",to:\"./\",onClick:function onClick(){return handleUpload();},children:\"Check !\"})]})]});};export default WebcamCapture;","map":{"version":3,"sources":["/Users/soone/Desktop/hell-met/front-end/src/pages/WebcamCapture.js"],"names":["React","useRef","useState","useEffect","Webcam","Link","imglogo","WebcamComponent","videoConstraints","width","height","facingMode","WebcamCapture","image","setImage","webcamRef","capture","useCallback","imageSrc","current","getScreenshot","dataURItoBlob","dataURI","byteString","atob","split","mimeString","ab","ArrayBuffer","length","ia","Uint8Array","i","charCodeAt","Blob","type","handleUpload","data","FormData","file","append","fetch","method","body","e","preventDefault"],"mappings":"8JAAA,MAAOA,CAAAA,KAAP,EAAgBC,MAAhB,CAAwBC,QAAxB,CAAkCC,SAAlC,KAAmD,OAAnD,CACA,MAAO,qBAAP,CACA,MAAOC,CAAAA,MAAP,KAAmB,cAAnB,CACA,OAASC,IAAT,KAAqB,kBAArB,CACA,MAAOC,CAAAA,OAAP,KAAoB,uBAApB,C,wFAEA,GAAMC,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,sBAAM,KAAC,MAAD,IAAN,EAAxB,CAEA,GAAMC,CAAAA,gBAAgB,CAAG,CACrBC,KAAK,CAAE,GADc,CAErBC,MAAM,CAAE,GAFa,CAGrBC,UAAU,CAAE,MAHS,CAAzB,CAMA,GAAMC,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,EAAM,CACzB,cAAuBV,QAAQ,CAAC,EAAD,CAA/B,wCAAOW,KAAP,eAAaC,QAAb,eACC,GAAMC,CAAAA,SAAS,CAAGf,KAAK,CAACC,MAAN,CAAa,IAAb,CAAlB,CAEA,GAAMe,CAAAA,OAAO,CAAGhB,KAAK,CAACiB,WAAN,CACZ,UAAM,CACN,GAAMC,CAAAA,QAAQ,CAAGH,SAAS,CAACI,OAAV,CAAkBC,aAAlB,EAAjB,CACAN,QAAQ,CAACI,QAAD,CAAR,CACC,CAJW,CAAhB,CAMA,GAAMG,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,CAACC,OAAD,CAAa,CAC/B,GAAIC,CAAAA,UAAU,CAAGC,IAAI,CAACF,OAAO,CAACG,KAAR,CAAc,GAAd,EAAmB,CAAnB,CAAD,CAArB,CACA,GAAIC,CAAAA,UAAU,CAAGJ,OAAO,CAACG,KAAR,CAAc,GAAd,EAAmB,CAAnB,EAAsBA,KAAtB,CAA4B,GAA5B,EAAiC,CAAjC,EAAoCA,KAApC,CAA0C,GAA1C,EAA+C,CAA/C,CAAjB,CAEA,GAAIE,CAAAA,EAAE,CAAG,GAAIC,CAAAA,WAAJ,CAAgBL,UAAU,CAACM,MAA3B,CAAT,CACA,GAAIC,CAAAA,EAAE,CAAG,GAAIC,CAAAA,UAAJ,CAAeJ,EAAf,CAAT,CACA,IAAI,GAAIK,CAAAA,CAAC,CAAG,CAAZ,CAAeA,CAAC,CAAGT,UAAU,CAACM,MAA9B,CAAsCG,CAAC,EAAvC,CAA2C,CACvCF,EAAE,CAACE,CAAD,CAAF,CAAQT,UAAU,CAACU,UAAX,CAAsBD,CAAtB,CAAR,CACH,CACD,MAAO,IAAIE,CAAAA,IAAJ,CAAS,CAACP,EAAD,CAAT,CAAe,CAAEQ,IAAI,CAAET,UAAR,CAAf,CAAP,CACH,CAVD,CAaA,GAAMU,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,EAAM,CAEvB,GAAMC,CAAAA,IAAI,CAAG,GAAIC,CAAAA,QAAJ,EAAb,CACA,GAAMC,CAAAA,IAAI,CAAGlB,aAAa,CAACR,KAAD,CAA1B,CACAwB,IAAI,CAACG,MAAL,CAAY,MAAZ,CAAmBD,IAAnB,CAAyB,UAAzB,EAEAE,KAAK,CAAC,kCAAD,CAAoC,CACrCC,MAAM,CAAE,MAD6B,CAErCC,IAAI,CAAEN,IAF+B,CAApC,CAAL,CAIH,CAVD,CAYA,mBACI,aAAK,SAAS,CAAC,kBAAf,wBACI,aAAK,SAAS,CAAC,UAAf,wBACQ,YAAK,SAAS,CAAC,iBAAf,UACKxB,KAAK,EAAI,EAAT,cAAc,KAAC,MAAD,EACf,KAAK,CAAE,KADQ,CAEf,MAAM,CAAE,GAFO,CAGf,GAAG,CAAEE,SAHU,CAIf,gBAAgB,CAAC,YAJF,CAKf,KAAK,CAAE,GALQ,CAMf,gBAAgB,CAAEP,gBANH,EAAd,cAOI,YAAK,GAAG,CAAEK,KAAV,EART,EADR,cAWQ,aAXR,cAYQ,qBACKA,KAAK,EAAI,EAAT,cACD,eAAQ,OAAO,CAAE,iBAAC+B,CAAD,CAAO,CACxBA,CAAC,CAACC,cAAF,GACA/B,QAAQ,CAAC,EAAD,CAAR,CACC,CAHD,CAIA,SAAS,CAAC,YAJV,oBADC,cAMD,eAAQ,OAAO,CAAE,iBAAC8B,CAAD,CAAO,CACxBA,CAAC,CAACC,cAAF,GACA7B,OAAO,GACN,CAHD,CAIA,SAAS,CAAC,YAJV,qBAPJ,EAZR,GADJ,cA8BI,aAAK,SAAS,CAAC,WAAf,wBACQ,YAAK,SAAS,CAAC,kBAAf,UACCH,KAAK,EAAI,EAAT,cAAc,YACX,GAAG,CAAEP,OADM,CAEX,MAAM,CAAE,GAFG,CAGX,KAAK,CAAE,GAHI,EAAd,cAIQ,YAAK,GAAG,CAAEO,KAAV,EALT,EADR,cAQQ,aARR,cASQ,aATR,cAUQ,KAAC,IAAD,EAAM,SAAS,CAAC,WAAhB,CAA4B,EAAE,CAAC,IAA/B,CAAoC,OAAO,CAAE,yBAAMuB,CAAAA,YAAY,EAAlB,EAA7C,qBAVR,GA9BJ,GADJ,CA6CH,CAhFD,CAkFA,cAAexB,CAAAA,aAAf","sourcesContent":["import React, { useRef, useState, useEffect } from 'react';\nimport './WebcamCapture.css';\nimport Webcam from \"react-webcam\"\nimport { Link } from 'react-router-dom';\nimport imglogo from './helmet_example1.png';\n\nconst WebcamComponent = () => <Webcam />;\n\nconst videoConstraints = {\n    width: 500,\n    height: 500,\n    facingMode: \"user\"\n};\n\nconst WebcamCapture = () => {\n   const [image,setImage]=useState('');\n    const webcamRef = React.useRef(null);\n\n    const capture = React.useCallback(\n        () => {\n        const imageSrc = webcamRef.current.getScreenshot();\n        setImage(imageSrc)\n        });\n\n    const dataURItoBlob = (dataURI) => {\n        let byteString = atob(dataURI.split(\",\")[1]);\n        let mimeString = dataURI.split(\",\")[0].split(\":\")[1].split(\";\")[0];\n\n        let ab = new ArrayBuffer(byteString.length);\n        let ia = new Uint8Array(ab);\n        for(let i = 0; i < byteString.length; i++) {\n            ia[i] = byteString.charCodeAt(i);\n        }\n        return new Blob([ab], { type: mimeString});\n    }\n\n\n    const handleUpload = () => {\n\n        const data = new FormData();\n        const file = dataURItoBlob(image);\n        data.append(\"file\",file, \"face.png\");\n\n        fetch('http://localhost:8000/api/upload',{\n            method: 'POST',\n            body: data\n        })\n    }\n\n    return (\n        <div className=\"webcam-container\">\n            <div className=\"box-left\">\n                    <div className=\"webcam-img-left\">\n                        {image == '' ? <Webcam\n                        audio={false}\n                        height={500}\n                        ref={webcamRef}\n                        screenshotFormat=\"image/jpeg\"\n                        width={500}\n                        videoConstraints={videoConstraints}\n                        /> : <img src={image} />}\n                    </div>\n                    <br></br>\n                    <div>\n                        {image != '' ?\n                        <button onClick={(e) => {\n                        e.preventDefault();\n                        setImage('')\n                        }}\n                        className=\"webcam-btn\">Again </button> :\n                        <button onClick={(e) => {\n                        e.preventDefault();\n                        capture();\n                        }}\n                        className=\"webcam-btn\">Capture</button>\n                        }\n                    </div>\n            </div>\n\n\n            <div className=\"box-right\">\n                    <div className=\"webcam-img-right\">\n                    {image == '' ? <img\n                        src={imglogo}\n                        height={500}\n                        width={500}\n                        /> : <img src={image} />}\n                    </div>\n                    <br></br>\n                    <br></br>\n                    <Link className=\"check-btn\" to=\"./\" onClick={() => handleUpload()} >Check !</Link>\n            </div>\n        </div>\n    );\n}\n\nexport default WebcamCapture;"]},"metadata":{},"sourceType":"module"}